\model{Merge}

  \par\vskip 10pt

  {\it\large Refer to Model 2 above as your team develops consensus answers
  to the questions below.}

  \quest{15 min}
  Some sort algorithms (e.g. bubble sort and selection sort) are simple but inefficient.
  To understand a better sort algorithm, we'll start with something easier - \textbf{merge}.

  \Q Recall that \textbf{$\theta()$}, \textbf{$O()$}, and \textbf{$\omega()$ notation} describes how input size
    affects operation count and run time. If the input size \textbf{doubles},
    what happens to the run time if an algorithm is O(1), O(N), etc?
    Which line at right shows this?
    \begin{center}
      \begin{tabular}{ |l|l|l|l| }
        \hline
        a. O(1) & b. O(N) & c. $O(N^2)$ & d. O(log N) \\
        \hline
        &         &              &          \\
        &         &              &          \\
        \hline
      \end{tabular}
    \end{center}

  \Q Use the table below to specify \textbf{unit tests} for \textbf{merge(arrA, arrB)},
    which \textbf{merges} two sorted arrays into one sorted array.    \begin{center}
      \begin{tabular}{ |l|l|l| }
        \hline
        \rowcolor{lightgray} \textbf{arrA} & \textbf{arrB} & \textbf{Expected Result} (return value, exception, etc) \\
        \hline
        (empty) & (empty) & (empty) \\
        \hline
        "B" & (empty) & \ans[4in]{"B"} \\
        \hline
        (empty) & "A" & \ans[4in]{"A"} \\
        \hline
        "B" & "A" & \ans[4in]{"A", "B"} \\
        \hline
        "B", "D" & "A", "C" & \ans[4in]{"A", "B", "C", "D"} \\
        \hline
        "B", "C", "D" & "A", "C" & \ans[4in]{"A", "B", "C", "C", "D"} \\
        \hline
      \end{tabular}
    \end{center}

  \Q Given 2 sorted arrays arrA \& arrB that will be merged into one sorted array arrC.\\
    \begin{minipage}[c]{0.25\textwidth}
      \begin{tabular}{ |c|c|c|c| }
        \hline
        \multicolumn{4}{|c|}{\textbf{arrA}} \\
        \hline
        $a^0$ & $a^1$ & $a^2$ & $a^3$ \\
        \hline
      \end{tabular}
    \end{minipage}
    \begin{minipage}[c]{0.25\textwidth}
      \begin{tabular}{ |c|c|c|c| }
        \hline
        \multicolumn{4}{|c|}{\textbf{arrB}} \\
        \hline
        $b^0$ & $b^1$ & $b^2$ & $b^3$ \\
        \hline
      \end{tabular}
    \end{minipage}
    \begin{minipage}[c]{0.5\textwidth}
      \begin{tabular}{ |c|c|c|c|c|c|c|c| }
        \hline
        \multicolumn{8}{|c|}{\textbf{$\Rightarrow$ arrC}} \\
        \hline
        $c^0$ & $c^1$ & $c^2$ & $c^3$ & $c^4$ & $c^5$ & $c^6$ & $c^7$ \\
        \hline
      \end{tabular}
    \end{minipage}

    \begin{enumerate}
      \item What is the length of \texttt{arrC}, in terms of \texttt{arrA.length} and \texttt{arrB.length}?
        \begin{answer}[0.6in]
          \texttt{arrC.length = arrA.length + arrB.length}
        \end{answer}

      \item There are only 2 values ($a_0$ and $b_0$) that could go into $c_0$. Explain why.
        \begin{answer}[0.6in]
          Since A and B are sorted, a0 is the smallest value in A and b0 is the smallest value in B,
          and so one of these two must be the smallest value in C.
        \end{answer}

      \item Once $c_0$ is chosen, there are only 2 values that could go into $c_1$. Explain why.
        \begin{answer}[0.6in]
          If a0 goes into c0, then compare a1 and b0. If b0 goes into c0, then compare a0 and b1.
        \end{answer}

      \item Similarly, once $c_0$ to $c_i$ are chosen, there are only 2 values that could go into $c_{i+1}$. Explain.
        \begin{answer}[0.6in]
          At each index we compare the smallest unused values from A \& B.
        \end{answer}
    \end{enumerate}

  \vskip -40pt

  \Q Given your answers above, how could we \textbf{merge()} 2 arrays efficiently?\key\\[-2.5mm]
    In complete sentences or pseudocode, describe a general approach for \textbf{merge()}.

    \texttt{void merge(string arrA[], int sizeA, string arrB[], int sizeB, string arrC[])}

    \begin{answer}[1.5in]
      Start at the beginning of both arrays. Step through both arrays at the same time,
      keeping track of current position in each. Choose the smaller of the two values,
      copy it to the merged list, and shift the position in that list. Continue until
      the end of one array, and then copy any values left in the other array to the merged list.

      \begin{cpplst}
// pseudocode - see instructor sample code for more details
void merge(string arrA[], int sizeA, string arrB[], int sizeB, string arrC[]) {
    int ia = 0, ib = 0;
    for (int i = 0; i < sizeA + sizeB; i++) {
        if (ib == sizeB || (ia < sizeA && arrA[ia].compare(arrB[ib]) < 0)) {
            arrC[i] = arrA[ia];
            ia++;
        } else {
            arrC[i] = arrB[ib];
            ib++;
        }
    }
}
      \end{cpplst}
    \end{answer}

  \Q The table below shows the contents of sorted arrays arrayA and arrayB.
    Complete the table to show how arrayC and the 3 index variables (ai, bi, ci) change over time.
    \begin{center}
      \begin{tabular}{ |r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r|r| }
        \hline
        \rowcolor{lightgray} \multicolumn{4}{|c|}{\textbf{arrayA}} & & \multicolumn{4}{|c|}{\textbf{arrayB}} & & \multicolumn{8}{|c|}{\textbf{arrayC}} & & \multicolumn{3}{|c|}{\textbf{vars}} \\
        \hline
        \textbf{0} & \textbf{1} & \textbf{2} & \textbf{3} & & \textbf{0} & \textbf{1} & \textbf{2} & \textbf{3} & & \textbf{0} & \textbf{1} & \textbf{2} & \textbf{3} & \textbf{4} & \textbf{5} & \textbf{6} & \textbf{7} & & \textbf{ai} & \textbf{bi} & \textbf{ci} \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & & & & & & & & & & 0 & 0 & 0 \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & & & & & & & & & 1 & 0 & 1 \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & 3 & & & & & & & & 1 & 1 & 2 \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & 3 & \ans[0.2in]{5} & & & & & & & \ans[0.2in]{1} & \ans[0.2in]{2} & \ans[0.2in]{3} \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & 3 & \ans[0.2in]{5} & \ans[0.2in]{6} & & & & & & \ans[0.2in]{2} & \ans[0.2in]{2} & \ans[0.2in]{4} \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & 3 & \ans[0.2in]{5} & \ans[0.2in]{6} & \ans[0.2in]{12} & & & & & \ans[0.2in]{3} & \ans[0.2in]{2} & \ans[0.2in]{5} \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & 3 & \ans[0.2in]{5} & \ans[0.2in]{6} & \ans[0.2in]{12} & \ans[0.2in]{14} & & & & \ans[0.2in]{4} & \ans[0.2in]{2} & \ans[0.2in]{6} \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & 3 & \ans[0.2in]{5} & \ans[0.2in]{6} & \ans[0.2in]{12} & \ans[0.2in]{14} & \ans[0.2in]{15} & & & \ans[0.2in]{4} & \ans[0.2in]{3} & \ans[0.2in]{7} \\
        \hline
        2 & 6 & 12 & 14 & & 3 & 5 & 15 & 17 & & 2 & 3 & \ans[0.2in]{5} & \ans[0.2in]{6} & \ans[0.2in]{12} & \ans[0.2in]{14} & \ans[0.2in]{15} & \ans[0.2in]{17} & & \ans[0.2in]{4} & \ans[0.2in]{4} & \ans[0.2in]{8} \\
        \hline
      \end{tabular}
    \end{center}

  \newpage

  \Q During merge(), if there are N/2 values in each sorted array,
    and N values in the merged array (also sorted), explain the \textbf{O()} effort to find:
    \begin{center}
      \begin{tabular}{ |l|m{3.5cm}|l|m{9cm}| }
        \hline
        \rowcolor{lightgray} & & \textbf{O()} & \textbf{Explanation} \\
        \hline
        a. & The \textbf{first value} in the merged array. & \ans[0.4in]{O(1)} & \ans[3in]{Compare 1st 2 values} \\
        \hline
        b. & The \textbf{second value} in the merged array. & \ans[0.4in]{O(1)} & \ans[3in]{Compare 1st value in one array and 2nd value in other array} \\
        \hline
        c. & Each \textbf{successive} value in the merged array. & \ans[0.4in]{O(1)} & \ans[3in]{Compare one value in each array} \\
        \hline
        d. & \textbf{All N} values in the merged array. & \ans[0.4in]{O(N)} & \ans[3in]{Repeat O(1) comparison for N values in merged array} \\
        \hline
      \end{tabular}
    \end{center}

  \Q In the following questions, a 2 item list is called a 2-list, a N item list
    is called an N-list, etc. Decide if each of the following is always sorted (Y or N):
    \begin{center}
      \renewcommand{\arraystretch}{1.5}
      \begin{tabular}{ |l|m{9cm}|m{3cm}| }
        \hline
        a. & a 16-list of random numbers & \ans[1in]{N=unsorted} \\
        \hline
        b. & the first half of a 32-list of random numbers & \ans[1in]{N=unsorted} \\
        \hline
        c. & a 1-list & \ans[1in]{Y=sorted} \\
        \hline
        d. & a 2-list made by merging 2 (sorted) 1-lists & \ans[1in]{Y=sorted} \\
        \hline
        e. & a 16-list made by merging 2 (sorted) 8-lists & \ans[1in]{Y=sorted} \\
        \hline
        f. & a N-list made by merging 2 (sorted) (N/2)-lists & \ans[1in]{Y=sorted} \\
        \hline
      \end{tabular}
    \end{center}

  \Q Decide how many new lists are made when pairs of lists are merged from:
    \begin{center}
      \renewcommand{\arraystretch}{1.5}
      \begin{tabular}{ |l|m{9cm}|m{3cm}| }
        \hline
        a. & 1024 1-lists into 2-lists & \ans[1in]{512 2-lists} \\
        \hline
        b. & all of those 2-lists into 4-lists & \ans[1in]{256 4-lists} \\
        \hline
        c. & N 1-lists (for any N) into 2-lists & \ans[1in]{N/2 2-lists} \\
        \hline
        d. & all of those 2-lists into 4-lists & \ans[1in]{N/4 4-lists} \\
        \hline
      \end{tabular}
    \end{center}

  \Q How could we use merge to sort an unsorted list? (Hint: think recursively.)\key\\[-2.5mm]
    In complete English sentences, describe a general approach for mergesort.
    \begin{answer}[0.7in]
      Treat N-list as N 1-lists. Merge pairs of 1-lists into sorted 2-lists. Merge pairs of 2-lists
      into sorted 4-lists. Repeat until 2 N/2 lists are merged into 1 sorted N-list.
    \end{answer}